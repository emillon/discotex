\RequirePackage{etoolbox}
\RequirePackage{xspace}

\def\gramisa{::=~\xspace}
\def\gramor{|\hspace{3mm}\xspace}

\def\gramster@buildtable#1#2#3{
  \ifstrequal{#3}{END}{
    #1 & \textrm{#2} \\
  }{
    #1 & \textrm{#2} \\
    & & & & \gramor & \gramster@buildtable{#3}
  }
}

\def\gramster@lblbox#1#2{
  \begin{minipage}{#1}
    \vbox to 0.7\baselineskip{
      #2
    }
  \end{minipage}
}

\newlength{\gramsterlabelwidth}
\setlength{\gramsterlabelwidth}{0.2\textwidth}

\newcommand{\gramdef}[6][\gramsterlabelwidth]{
    & \gramster@lblbox{#1}{\textrm{#2}} & & & #3 \gramisa &
  \gramster@buildtable{#4}{#5}{#6}
}
